{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redwood Civic Center</title>
  <link rel="icon" href="{% static 'images/favicon.ico' %}">
  <link rel="stylesheet" href="{% static 'css/Reservation.css' %}">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
  <script src="{% static 'js/Reservation.js' %}" defer></script>

  <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script>
    $(function () {
      $("#datepicker").datepicker();

      //selecting the button and adding a click event
      $("#send").click(function () {
        //alerting the value inside the textbox
        var date = $("#datepicker").datepicker("getDate");
        // alert($.datepicker.formatDate("yy-mm-dd", date));

        var format_date = $.datepicker.formatDate("yy-mm-dd", date);
        //alert(format_date);
        var e = document.getElementById('availableRooms');
        //var room = e.value;
        var room = e.options[e.selectedIndex].value;



        $.ajax({
          type: "GET",
          url: 'Redwood-Reservation',
          // data: format_date,
          data: {
            "format_date": format_date,
            "room": room
          },
          dataType: "json",
          success: function (data) {
            // any process in data
            alert("successfull")
          },
          failure: function () {
            alert("failure");
          }
        });


      });


    });


    //room

    // $(function () {

    //   $("#sendRoom").click(function() {

    //     var e = document.getElementById('availableRooms');
    //     var room = e.value;



    //     $.ajax({
    //       type: "GET",
    //       url: 'Redwood-Reservation',
    //       // data: format_date,
    //       data: {
    //           "room": room,
    //       },
    //       dataType: "json",
    //       success: function (data) {
    //           // any process in data
    //           alert("successfull")
    //       },
    //       failure: function () {
    //           alert("failure");
    //       }
    //   });


    //   });


    // });

    // $(function update() {
    //     var select = document.getElementById('timeslots');
    //     var option = select.options[select.selectedIndex];
    // });
    // $("#sendRoom").click(function() {   

    //     var select = document.getElementById('timeslots');
    //     var option = select.options[select.selectedIndex];


    //     $.ajax({
    //       type: "GET",
    //       url: 'Redwood-Reservation',
    //       // data: format_date,
    //       data: {
    //           "option": option,
    //       },
    //       dataType: "json",
    //       success: function (data) {
    //           // any process in data
    //           alert("successfull")
    //       },
    //       failure: function () {
    //           alert("failure");
    //       }
    //   });


    //   });
  </script>



</head>

<body>

  {% for room_type in room_types %}
  {% if current_room == room_type.room_type %}
  <!-- multistep form -->
  <form id="multistepsform" autocomplete="off" method="POST" action="">
    {% csrf_token %}
    <!-- progressbar -->
    <ul id="progressbar">
      <li class="active">Date and Room</li>
      <li class="active">Time Slots</li>
      <li>Personal Details</li>
      <li>Usage Fee</li>
    </ul>
    <fieldset>
      <h2 class="fs-title">Available Time slots for type {{room_type.room_type}}</h2>
      </select>
      <select id="timeslots" name="timeslots" placeholder="" onchange="update()">
        <option selected hidden>Available Timeslot</option>
        {% for reservations in room_ledger %}
          {% if current_room == reservations.room_type %}
        <!-- 3 all -->
            {% if reservations.morning == 0 and reservations.afternoon == 0 and reservations.evening == 0 %}
              <option name="morning">Morning (9:00 to 12:00 PM)</option>
              <option name="afternoon">Afternoon (1:00 to 5:00 PM)</option>
              <option name="evening">Evening (6:00 to 10:00 PM)</option>
            <!--2 by 2-->
            {% elif reservations.morning == 0 and reservations.afternoon == 0 %}
              <option name="morning">Morning (9:00 to 12:00 PM)</option>
              <option name="afternoon">Afternoon (1:00 to 5:00 PM)</option>
            {% elif reservations.morning == 0 and reservations.evening == 0 %}
              <option name="morning">Morning (9:00 to 12:00 PM)</option>
              <option name="evening">Evening (6:00 to 10:00 PM)</option>
            {% elif reservations.afternoon == 0 and reservations.evening == 0 %}
              <option name="afternoon">Afternoon (1:00 to 5:00 PM)</option>
              <option name="evening">Evening (6:00 to 10:00 PM)</option>
            <!--1 by 1  -->
            {% elif reservations.morning == 0 %}
                <option name="morning">Morning (9:00 to 12:00 PM)</option>
            {% elif reservations.afternoon == 0 %}
              <option name="afternoon">Afternoon (1:00 to 5:00 PM)</option>
            {% elif reservations.evening == 0 %}
              <option name="evening">Evening (6:00 to 10:00 PM)</option>
            {% else %}
              <option hidden>Nothing to show here!</option>
            {% endif %}
          {% endif %}
        {% endfor %}
      </select>
      <input type="submit" name="previousDate" class="previous action-button" value="Previous" />
      <input type="button" name="next" class="next action-button" value="Next" />

    </fieldset>

    <fieldset>
      <h2 class="fs-title">Personal Details</h2>
      <h3 class="fs-subtitle">We will never sell it</h3>
      <input type="text" name="name" placeholder="Name" />
      <input type="email" name="name" placeholder="Email" />
      <input type="number" name="phone" placeholder="Phone" />
      <textarea type="address" name="address" placeholder="Address"></textarea>
      <input type="button" name="previous" class="previous action-button" value="Previous" />
      <input type="button" name="next" class="next action-button" value="Next" />
    </fieldset>
    <fieldset>
      <h2 class="fs-title">Usage Fee</h2>
      <h3 class="fs-subtitle">We remind you of the prices of your chosen conference room</h3>
      <h4 class="fs-subtitle">Morning: ${{room_type.morning}}</h4>
      <h4 class="fs-subtitle">Afternoon: ${{room_type.afternoon}}</h4>
      <h4 class="fs-subtitle">Evening: ${{room_type.evening}}</h4>
      <input type="button" name="previous" class="previous action-button" value="Previous" />
      <input type="submit" name="submit" class="submit action-button" value="Submit" />
      <!-- <input type="submit" name="submit" class="submit action-button" value="Submit" /> -->
    </fieldset>
  </form>
  {% endif %}
  {% endfor %}
</body>

</html>